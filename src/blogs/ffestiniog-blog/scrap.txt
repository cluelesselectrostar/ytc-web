

import React, { useState, useEffect, Component } from 'react';
import ReactMarkdown from 'react-markdown';
import marked from 'marked';

const WalesBlog =require("./ffestiniog.md");


class BlogImport extends Component {
    
    constructor(props) {
        super(props);
        this.state = { markdown: null};
    }
    
    
    componentDidMount() {
        fetch(WalesBlog)
            .then(response => response.text())
            .then(text => {
                this.setState({
                    post: marked(text)
                })
            })
    }
    
    /*
    componentWillMount() {
        import(this.props.path)
        fetch(WalesBlog)
        .then(res => {
            fetch(res.default)
                .then(res => res.text())
                .then(text => this.setState({
                    post: text
                }))
                .catch(err => console.log(err));
        })
        .catch(err => console.log(err));
    }
    */

    /*
    componentWillMount() {
        fetch(WalesBlog).then((response) => response.text()).then((text) => {
          this.setState({ post: text })
        })
      }
    */

    render() {    
        return (
            <div>
                {/* <ReactMarkdown source={this.state.post} /> */}
                <article dangerouslySetInnerHTML={{__html: markdown}}></article>
            </div>
        );
    }

    /*
    constructor() {
        super();
        this.state = { markdown: '' };
      }
    
      componentWillMount() {
        // Get the contents from the Markdown file and put them in the React state, so we can reference it in render() below.
        fetch(WalesBlog).then(res => res.text()).then(text => this.setState({ markdown: text }));
      }
    
      render() {
        const { markdown } = this.state;
        return <ReactMarkdown source={markdown} />;
      }
      */
}

/*
function BlogImport(path) {

    const file_name = path;
    const [post, setPost] = useState('');

    useEffect(() => {
        import(`${file_name}`)
            .then(res => {
                fetch(res.default)
                    .then(res => res.text())
                    .then(res => setPost(res))
                    .catch(err => console.log(err));
            })
            .catch(err => console.log(err));
    });

    return (
        <main>
            <div class="align-items-md-stretch h-100 p-5">
                <ReactMarkdown children={post} />
            </div> 
        </main>
    );
}
*/

export default BlogImport;
